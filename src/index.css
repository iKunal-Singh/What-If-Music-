
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base colors using OKLCH */
    --color-background: oklch(1 0 0); /* Pure white */
    --color-foreground: oklch(0.2 0 0); /* Near black */
    --color-muted: oklch(0.9 0 0);
    --color-muted-foreground: oklch(0.4 0.01 240);
    --color-card: oklch(1 0 0);
    --color-card-foreground: oklch(0.2 0 0);
    --color-popover: oklch(1 0 0);
    --color-popover-foreground: oklch(0.2 0 0);
    --color-border: oklch(0.9 0 0);
    --color-input: oklch(0.9 0 0);

    /* Primary - Using beatwave red */
    --color-primary: oklch(0.6 0.26 29.2); /* Beatwave red */
    --color-primary-foreground: oklch(1 0 0);

    /* Secondary */
    --color-secondary: oklch(0.96 0 0);
    --color-secondary-foreground: oklch(0.2 0 0);

    /* Accent */
    --color-accent: oklch(0.85 0.1 252); /* Light purple */
    --color-accent-foreground: oklch(0.2 0 0);

    /* Destructive */
    --color-destructive: oklch(0.6 0.26 29.2);
    --color-destructive-foreground: oklch(1 0 0);

    /* Ring (focus outlines) */
    --color-ring: oklch(0.6 0.26 29.2);

    /* Purple colors */
    --color-purple: oklch(0.7 0.18 295.8); /* Original purple (#9b87f5) */
    --color-purple-light: oklch(0.85 0.1 292); /* Light purple */
    --color-purple-dark: oklch(0.55 0.16 295.8); /* Dark purple */

    /* Beatwave colors */
    --color-beatwave: oklch(0.6 0.26 29.2); /* Beatwave red */
    --color-beatwave-50: oklch(0.95 0.05 29.2);
    --color-beatwave-100: oklch(0.9 0.08 29.2);
    --color-beatwave-200: oklch(0.85 0.12 29.2);
    --color-beatwave-300: oklch(0.8 0.16 29.2);
    --color-beatwave-400: oklch(0.7 0.2 29.2);
    --color-beatwave-500: oklch(0.6 0.26 29.2);
    --color-beatwave-600: oklch(0.5 0.22 29.2);
    --color-beatwave-700: oklch(0.4 0.18 29.2);
    --color-beatwave-800: oklch(0.3 0.14 29.2);
    --color-beatwave-900: oklch(0.2 0.1 29.2);
    --color-beatwave-950: oklch(0.1 0.05 29.2);

    /* Typography settings */
    --font-sans: 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif';
    
    /* Shadowing and radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

    /* Mapping variables to shadcn variables for compatibility */
    --background: var(--color-background);
    --foreground: var(--color-foreground);
    --card: var(--color-card);
    --card-foreground: var(--color-card-foreground);
    --popover: var(--color-popover);
    --popover-foreground: var(--color-popover-foreground);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-primary-foreground);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-secondary-foreground);
    --muted: var(--color-muted);
    --muted-foreground: var(--color-muted-foreground);
    --accent: var(--color-accent);
    --accent-foreground: var(--color-accent-foreground);
    --destructive: var(--color-destructive);
    --destructive-foreground: var(--color-destructive-foreground);
    --border: var(--color-border);
    --input: var(--color-input);
    --ring: var(--color-ring);
    --radius: var(--radius-md);
  }

  .dark {
    --color-background: oklch(0.15 0 0); /* Dark background */
    --color-foreground: oklch(0.98 0 0); /* Near white */
    --color-muted: oklch(0.2 0 0);
    --color-muted-foreground: oklch(0.7 0 0);
    --color-card: oklch(0.17 0 0);
    --color-card-foreground: oklch(0.98 0 0);
    --color-popover: oklch(0.15 0 0);
    --color-popover-foreground: oklch(0.98 0 0);
    --color-border: oklch(0.3 0 0);
    --color-input: oklch(0.3 0 0);

    /* Primary - Using beatwave red */
    --color-primary: oklch(0.6 0.26 29.2); /* Beatwave red */
    --color-primary-foreground: oklch(1 0 0);

    /* Secondary */
    --color-secondary: oklch(0.2 0 0);
    --color-secondary-foreground: oklch(0.98 0 0);

    /* Accent */
    --color-accent: oklch(0.7 0.18 295.8); /* Purple */
    --color-accent-foreground: oklch(1 0 0);

    /* Destructive */
    --color-destructive: oklch(0.5 0.26 29.2);
    --color-destructive-foreground: oklch(1 0 0);

    /* Ring (focus outlines) */
    --color-ring: oklch(0.6 0.26 29.2);

    /* Purple colors */
    --color-purple: oklch(0.7 0.18 295.8); /* Original purple */
    --color-purple-light: oklch(0.8 0.12 292); /* Light purple */
    --color-purple-dark: oklch(0.5 0.2 295.8); /* Dark purple */

    /* Beatwave colors */
    --color-beatwave: oklch(0.6 0.26 29.2); /* Beatwave red */
    --color-beatwave-50: oklch(0.9 0.05 29.2);
    --color-beatwave-100: oklch(0.85 0.08 29.2);
    --color-beatwave-200: oklch(0.8 0.12 29.2);
    --color-beatwave-300: oklch(0.75 0.16 29.2);
    --color-beatwave-400: oklch(0.65 0.2 29.2);
    --color-beatwave-500: oklch(0.6 0.26 29.2);
    --color-beatwave-600: oklch(0.45 0.22 29.2);
    --color-beatwave-700: oklch(0.35 0.18 29.2);
    --color-beatwave-800: oklch(0.25 0.14 29.2);
    --color-beatwave-900: oklch(0.15 0.1 29.2);
    --color-beatwave-950: oklch(0.08 0.05 29.2);

    /* Mapping variables to shadcn variables */
    --background: var(--color-background);
    --foreground: var(--color-foreground);
    --card: var(--color-card);
    --card-foreground: var(--color-card-foreground);
    --popover: var(--color-popover);
    --popover-foreground: var(--color-popover-foreground);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-primary-foreground);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-secondary-foreground);
    --muted: var(--color-muted);
    --muted-foreground: var(--color-muted-foreground);
    --accent: var(--color-accent);
    --accent-foreground: var(--color-accent-foreground);
    --destructive: var(--color-destructive);
    --destructive-foreground: var(--color-destructive-foreground);
    --border: var(--color-border);
    --input: var(--color-input);
    --ring: var(--color-ring);
  }

  /* Media query fallback for system preference */
  @media (prefers-color-scheme: dark) {
    html:not(.light) {
      color-scheme: dark;
    }
  }

  * {
    @apply border-border;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Improved accessibility for focus states */
  :focus {
    @apply outline-2 outline-offset-2 outline-primary;
  }

  /* Improved heading hierarchy */
  h1, h2, h3, h4, h5, h6 {
    @apply font-medium tracking-tight;
    line-height: 1.2;
  }

  h1 {
    @apply text-4xl md:text-5xl lg:text-6xl;
  }

  h2 {
    @apply text-3xl md:text-4xl;
  }

  h3 {
    @apply text-2xl md:text-3xl;
  }

  h4 {
    @apply text-xl md:text-2xl;
  }

  /* Skip to content link for accessibility */
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-background focus:px-3 focus:py-2 focus:text-foreground focus:outline-none;
  }
}

@layer components {
  /* Audio player components */
  .audio-bar {
    @apply h-full w-1 bg-primary mx-[1px] rounded-full;
  }

  .wave-animations .audio-bar:nth-child(1) { animation-delay: 0.0s; }
  .wave-animations .audio-bar:nth-child(2) { animation-delay: 0.03s; }
  .wave-animations .audio-bar:nth-child(3) { animation-delay: 0.06s; }
  .wave-animations .audio-bar:nth-child(4) { animation-delay: 0.09s; }
  .wave-animations .audio-bar:nth-child(5) { animation-delay: 0.12s; }

  /* Component styles */
  .card {
    @apply bg-card rounded-md p-6 border border-border border-opacity-30 shadow-sm transition-all duration-200;
  }
  
  .btn {
    @apply rounded-md px-4 py-2 font-medium text-center transition-all duration-200;
  }

  .input {
    @apply rounded-md border border-input bg-transparent px-3 py-2 text-sm text-foreground ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1;
  }
  
  .music-card {
    @apply bg-card rounded-md p-4 transition-all duration-200 border border-border border-opacity-30 shadow-sm;
  }
  
  .music-card:hover {
    @apply shadow-md;
  }

  .beat-tag {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-secondary text-secondary-foreground hover:bg-primary hover:text-white cursor-pointer transition-all duration-200;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 dark:bg-black/80 backdrop-blur-md border border-white/20 dark:border-white/10;
  }
}

@layer utilities {
  /* Utilities */
  .shadow-sm {
    box-shadow: var(--shadow-sm);
  }
  
  .shadow {
    box-shadow: var(--shadow-md);
  }
  
  .shadow-lg {
    box-shadow: var(--shadow-lg);
  }

  /* Ensure accessible contrast ratios */
  .text-safe-contrast {
    @apply text-foreground dark:text-foreground; 
  }
  
  /* Optimized animation utility classes */
  .animated-gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary via-purple-light to-purple-dark;
  }
  
  /* Responsive classes */
  .responsive-container {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
  }
}
